(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14993290"],{"474e":function(t,e,a){"use strict";a("78f2")},"78f2":function(t,e,a){},"89c6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",plain:""},on:{click:t.handleAdd}},[t._v("新增")]),t._v(" "),1==t.saveStat?a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",plain:""},on:{click:t.handleSave}},[t._v("\n      保存\n    ")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-remove-outline",plain:""},on:{click:t.batchDelete}},[t._v("批量删除\n    ")]),t._v(" "),0==t.saveStat&&t.tableData.length>0?a("el-button",{attrs:{size:"auto",icon:"el-icon-edit-outline"},on:{click:t.handleEdit}},[t._v("编辑\n    ")]):t._e()],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.filter((function(e){return!t.search||e.title.toLowerCase().includes(t.search.toLowerCase())}))},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"标题",prop:"title"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[1==t.editStat?a("el-input",{staticStyle:{width:"350px","margin-left":"50px"},attrs:{size:"auto",clearable:"",maxlength:"100"},model:{value:e.row.title,callback:function(a){t.$set(e.row,"title",a)},expression:"scope.row.title"}}):a("span",[t._v(t._s(e.row.title))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"内容",prop:"content"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[1==t.editStat?a("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",size:"auto",autosize:"",maxlength:"500"},model:{value:e.row.content,callback:function(a){t.$set(e.row,"content",a)},expression:"scope.row.content"}}):a("span",[t._v(t._s(e.row.content))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{size:"small",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}}])})],1)],1)},s=[],i=a("c7eb"),c=(a("96cf"),a("1da1")),r=a("b775");function o(){return Object(r["a"])({url:"/api/queryList",method:"get"})}function l(t){return Object(r["a"])({url:"api/saveOrUpdateRecord",method:"post",data:t})}function u(t){return Object(r["a"])({url:"api/deleteByIds",method:"post",data:t})}var d={name:"Memorandum",inject:["reload"],data:function(){return{tableData:[],search:"",idList:[],editStat:!1,saveStat:!1,sel:[]}},watch:{},created:function(){this.getData()},methods:{getData:function(){var t=Object(c["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:this.tableData=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectionChange:function(t){console.log("选择触发: ",t),this.sel=t},handleAdd:function(){var t={};this.tableData.push(t),this.saveStat||(this.editStat=!this.editStat,this.saveStat=!this.saveStat)},handleSave:function(){var t=this;console.log("删除的id 列表 ",this.idList),0==this.idList.length?l(this.tableData).then((function(){t.idList.splice(0,t.idList.length),t.$message({type:"success",message:"保存修改成功!"})})).catch((function(e){t.$log.info("err",e)})):u(this.idList).then((function(){t.idList.splice(0,t.idList.length),t.$message({type:"success",message:"删除成功!"})})).catch((function(e){t.$log.info("err",e)})),this.saveStat=!this.saveStat,this.reload()},batchDelete:function(){var t=this;this.$confirm("确认删除所选记录吗?","提示",{type:"warning"}).then((function(){var e=t.sel.map((function(t){return t.id}));e.length>0&&(u(e).then((function(){t.$message({message:"删除成功",type:"success"})})),t.reload())})).catch((function(e){t.$log.info("err",e)}))},handleEdit:function(){this.saveStat||(this.editStat=!this.editStat,this.saveStat=!this.saveStat)}}},h=d,p=(a("474e"),a("2877")),f=Object(p["a"])(h,n,s,!1,null,"2863b824",null);e["default"]=f.exports},b775:function(t,e,a){"use strict";var n=a("53ca"),s=a("bc3a"),i=a.n(s),c=a("5c96"),r=a("371c"),o=i.a.create({baseURL:"",headers:{"Content-Type":"application/json;charset=utf-8 "}});o.interceptors.request.use((function(t){return t}),(function(t){return r["a"].error(t),Promise.reject(t)})),o.interceptors.response.use((function(t){var e=t.data||t;if("string"===typeof e&&(e=e.trim()),""!==e&&"object"===Object(n["a"])(e)){if("string"===typeof e&&(e=JSON.parse(e)),e.meta={success:200===t.status||201===t.status},200===e.code)return"success"!==e.msg&&Object(c["Message"])({message:e.msg,type:"success",duration:"5000"}),e.data;if(500===e.code)return Object(c["Message"])({message:e.msg||"服务器内部错误,请联系管理员！",type:"error",duration:"5000"}),e.data}return e}),(function(t){return r["a"].error(t),Object(c["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=o}}]);