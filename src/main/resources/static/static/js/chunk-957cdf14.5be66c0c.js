(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-957cdf14"],{"74df":function(t,e,n){},"89c6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",plain:""},on:{click:t.handleAdd}},[t._v("新增")]),t._v(" "),1==t.saveStat?n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",plain:""},on:{click:t.handleSave}},[t._v("\n      保存\n    ")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-remove-outline",plain:""},on:{click:t.batchDelete}},[t._v("批量删除\n    ")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.filter((function(e){return!t.search||e.title.toLowerCase().includes(t.search.toLowerCase())}))},on:{"selection-change":t.selectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"标题",prop:"title"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[1==t.editStat?n("el-input",{staticStyle:{width:"350px","margin-left":"50px"},attrs:{size:"auto",clearable:"",maxlength:"100"},model:{value:e.row.title,callback:function(n){t.$set(e.row,"title",n)},expression:"scope.row.title"}}):n("span",[t._v(t._s(e.row.title))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"内容",prop:"content"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[1==t.editStat?n("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",size:"auto",autosize:"",maxlength:"500"},model:{value:e.row.content,callback:function(n){t.$set(e.row,"content",n)},expression:"scope.row.content"}}):n("span",[t._v(t._s(e.row.content))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("el-input",{attrs:{size:"small",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"auto"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑\n        ")]),t._v(" "),n("el-button",{attrs:{size:"auto",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除\n        ")])]}}])})],1)],1)},s=[],i=(n("ac6a"),n("456d"),n("c7eb")),c=(n("96cf"),n("1da1")),r=n("b775");function o(){return Object(r["a"])({url:"/api/queryList",method:"get"})}function l(t){return Object(r["a"])({url:"api/saveOrUpdateRecord",method:"post",data:t})}function u(t){return Object(r["a"])({url:"api/deleteByIds",method:"post",data:t})}var d={name:"Memorandum",inject:["reload"],data:function(){return{tableData:[],search:"",idList:[],editStat:!1,saveStat:!1,sel:[]}},watch:{},created:function(){this.getData()},methods:{getData:function(){var t=Object(c["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:this.tableData=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectionChange:function(t){console.log("选择触发: ",t),this.sel=t},handleAdd:function(){var t={};this.tableData.push(t),this.saveStat||(this.editStat=!this.editStat,this.saveStat=!this.saveStat)},handleSave:function(){var t=this;console.log("删除的id 列表 ",this.idList),0==this.idList.length?l(this.tableData).then((function(){t.idList.splice(0,t.idList.length),t.$message({type:"success",message:"保存修改成功!"})})).catch((function(e){t.$log.info("err",e)})):u(this.idList).then((function(){t.idList.splice(0,t.idList.length),t.$message({type:"success",message:"删除成功!"})})).catch((function(e){t.$log.info("err",e)})),this.saveStat=!this.saveStat,this.reload()},batchDelete:function(){var t=this;this.$confirm("确认删除所选记录吗?","提示",{type:"warning"}).then((function(){var e=t.sel.map((function(t){return t.id}));e.length>0&&(u(e).then((function(){t.$message({message:"删除成功",type:"success"})})),t.reload())})).catch((function(e){t.$log.info("err",e)}))},handleEdit:function(t,e){this.saveStat||(this.editStat=!this.editStat,this.saveStat=!this.saveStat)},handleDelete:function(t,e){var n=this,a=this.tableData[t];null!=a&&0==Object.keys(a).length?(this.idList.push(e.id),this.tableData.splice(t,1)):this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){n.idList.push(e.id),n.tableData.splice(t,1),n.$message({type:"success",message:"删除成功!"})})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))}}},h=d,p=(n("dc67"),n("2877")),f=Object(p["a"])(h,a,s,!1,null,"78b32db8",null);e["default"]=f.exports},b775:function(t,e,n){"use strict";var a=n("53ca"),s=n("bc3a"),i=n.n(s),c=n("5c96"),r=n("371c"),o=i.a.create({baseURL:"/stage-api",headers:{"Content-Type":"application/json;charset=utf-8 "}});o.interceptors.request.use((function(t){return t}),(function(t){return r["a"].error(t),Promise.reject(t)})),o.interceptors.response.use((function(t){var e=t.data||t;if("string"===typeof e&&(e=e.trim()),""!==e&&"object"===Object(a["a"])(e)){if("string"===typeof e&&(e=JSON.parse(e)),e.meta={success:200===t.status||201===t.status},200===e.code)return"success"!==e.msg&&Object(c["Message"])({message:e.msg,type:"success",duration:"5000"}),e.data;if(500===e.code)return Object(c["Message"])({message:e.msg||"服务器内部错误,请联系管理员！",type:"error",duration:"5000"}),e.data}return e}),(function(t){return r["a"].error(t),Object(c["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=o},dc67:function(t,e,n){"use strict";n("74df")}}]);